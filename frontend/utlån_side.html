<!DOCTYPE html> 
<html> 
    <head> 
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
        <title>Nytt Utlån</title> 
        <meta name="description" content=""> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="style.css"> 
    </head> 
    <body> 
        <div style="display: grid; grid-template-columns: auto auto;"> 
            <div style="display: grid; grid-template-columns: auto auto auto auto; width: 100%;"> 
                <h4>Elev navn</h4> 
                <h4>PC nummer</h4> 
                <h4>Dato lånet</h4> 
                <h4>Leverings dato</h4> 
                <input type="text" placeholder="Elev navn..." id="navn"> 
                <select id="pc_nummer"></select>
                <input type="date" id="dato_lånt"> 
                <input type="date" id="leverings_dato"> 
            </div> 
            <a href="index.html"><button onclick="addRental()" style="margin-left: 5px; width: 30%; height: 100%;">Legg til</button></a> 
        </div> 
        <script src="oppdater_liste.js"></script> 
        <script>
            async function loadPCOptions() {
                const res = await fetch("/pcs/status");
                const pcs = await res.json();

                const select = document.getElementById("pc_nummer");
                select.innerHTML = "";

                const availablePCs = pcs.filter(pc => pc.status === "available");

                if (availablePCs.length === 0) {
                    const opt = document.createElement("option");
                    opt.textContent = "No PCs available";
                    opt.value = "";
                    opt.disabled = true;
                    opt.selected = true;
                    select.appendChild(opt);
                    select.disabled = true;
                    return;
                }

                select.disabled = false;

                const placeholder = document.createElement("option");
                placeholder.textContent = "Select PC...";
                placeholder.value = "";
                placeholder.disabled = true;
                placeholder.selected = true;
                select.appendChild(placeholder);

                availablePCs.forEach(pc => {
                    const opt = document.createElement("option");
                    opt.value = pc.pc_number;
                    opt.textContent = `${pc.pc_number} (${pc.model})`;
                    select.appendChild(opt);
                });
                }

                loadPCOptions();
        </script>
    </body> 
</html>